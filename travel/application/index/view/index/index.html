{extend name="public:base" /}
{block name="body"}
    <div class="row">
        <div class="col-md-8">
        <div class="page-header">
            <h2>æ•°æ®å±•ç¤ºåŒº</h2>
        </div>
 <!-- ä¸ºEChartså‡†å¤‡ä¸€ä¸ªå…·å¤‡å¤§å°ï¼ˆå®½é«˜ï¼‰çš„Dom -->
    <div id="main" style="height:400px"></div>
    <!-- EChartså•æ–‡ä»¶å¼•å…¥ -->
    <script src="http://echarts.baidu.com/build/dist/echarts.js"></script>
    <script type="text/javascript">
        // è·¯å¾„é…ç½®
        require.config({
            paths: {
                echarts: 'http://echarts.baidu.com/build/dist'
            }
        });
        
        // ä½¿ç”¨
        require(
            [
                'echarts',
                'echarts/chart/pie' // ä½¿ç”¨æŸ±çŠ¶å›¾å°±åŠ è½½baræ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½
            ],
            function (ec) {
                // åŸºäºå‡†å¤‡å¥½çš„domï¼Œåˆå§‹åŒ–echartså›¾è¡¨
                var myChart = ec.init(document.getElementById('main')); 
                
                var option = {
    title : {
        text: 'çƒ­é—¨åˆ†ç±»æ’è¡Œ',
        subtext: 'æŒ‰æ™¯ç‚¹æ•°ç›®',
        x:'right',
        y:'bottom'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
        x : 'left',
        data:['è‡ªç„¶é£å…‰','æ–‡åŒ–å¤è¿¹','æ¸¸ä¹åœº','å±±å·','æ¸©æ³‰','å…¬å›­','å†œå®¶åº¦å‡','å±•é¦†','å¤å»ºç­‘']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : false,
    series : (function (){
        var series = [];
        for (var i = 0; i < 30; i++) {
            series.push({
                name:'åˆ†ç±»',
                type:'pie',
                itemStyle : {normal : {
                    label : {show : i > 28},
                    labelLine : {show : i > 28, length:20}
                }},
                radius : [i * 4 + 40, i * 4 + 43],
                data:[
                    {value: i * 128 + 4935,  name:'è‡ªç„¶é£å…‰'},
                    {value: i * 64  + 6253,  name:'æ–‡åŒ–å¤è¿¹'},
                    {value: i * 32  + 3098,  name:'æ¸¸ä¹åœº'},
                    {value: i * 16  + 2498,  name:'å±±å·'},
                    {value: i * 8  + 1280, name:'æ¸©æ³‰'},
                    {value: i * 8  + 3505, name:'å…¬å›­'},
                    {value: i * 8  + 3398, name:'å†œå®¶åº¦å‡'},
                    {value: i * 8  + 2632, name:'å±•é¦†'},
                    {value: i * 8  + 2489, name:'å¤å»ºç­‘'}
                ]
            })
        }
        series[0].markPoint = {
            symbol:'emptyCircle',
            symbolSize:series[0].radius[0],
            effect:{show:true,scaleSize:12,color:'rgba(250,225,50,0.8)',shadowBlur:10,period:30},
            data:[{x:'50%',y:'50%'}]
        };
        return series;
    })()
};
setTimeout(function (){
    var _ZR = myChart.getZrender();
    var TextShape = require('zrender/shape/Text');
    // è¡¥å……åƒå±‚é¥¼
    _ZR.addShape(new TextShape({
        style : {
            x : _ZR.getWidth() / 2,
            y : _ZR.getHeight() / 2,
            color: '#666',
            text : 'ğŸ˜Š',
            textAlign : 'center'
        }
    }));
    _ZR.addShape(new TextShape({
        style : {
            x : _ZR.getWidth() / 2 + 200,
            y : _ZR.getHeight() / 2,
            brushType:'fill',
            color: 'orange',
            text : '',
            textAlign : 'left',
            textFont:'normal 20px å¾®è½¯é›…é»‘'
        }
    }));
    _ZR.refresh();
}, 2000);

                    
        
                // ä¸ºechartså¯¹è±¡åŠ è½½æ•°æ® 
                myChart.setOption(option); 
            }
        );
    </script>
{/block}
